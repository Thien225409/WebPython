{% extends "base.html" %}
{% block title %}{{ product.name }} – Meat Shop{% endblock %}

{% block content %}
  <h1>{{ product.name }}</h1>
  <p><strong>Giá:</strong> {{ "{:,.0f}".format(product.price) }}₫</p>
  <p><strong>Kho:</strong> {{ product.stock }}</p>
  <p><strong>Mô tả:</strong> {{ product.decription }}</p>
  <p><img src="{{ product.image_url }}" alt="{{ product.name }}" style="max-width:300px;"></p>

  {# User thường: thêm vào giỏ #}
  {% if request.user and not request.user.is_admin %}
    <form action="/cart/add" method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
      <input type="hidden" name="product_id" value="{{ product.product_id }}">
      <button type="submit">Thêm vào giỏ</button>
    </form>
  {% endif %}

  {# Admin: edit / delete #}
  {% if request.user and request.user.is_admin %}
    <p>
      <a href="/product/{{ product.product_id }}/edit">✏️ Chỉnh sửa</a>
      <form action="/product/{{ product.product_id }}/delete" method="post" style="display:inline;">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
        <button type="submit">🗑️ Xóa</button>
      </form>
    </p>
  {% endif %}
{% endblock %}
